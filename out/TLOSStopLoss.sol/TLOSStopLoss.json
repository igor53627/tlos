{"abi":[{"type":"constructor","inputs":[{"name":"_oracle","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"receive","stateMutability":"payable"},{"type":"function","name":"cancelStopLoss","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"deposit","inputs":[],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"getOraclePrice","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getPosition","inputs":[{"name":"user","type":"address","internalType":"address"}],"outputs":[{"name":"collateral","type":"uint256","internalType":"uint256"},{"name":"circuit","type":"address","internalType":"address"},{"name":"userCode","type":"bytes32","internalType":"bytes32"},{"name":"active","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"oracle","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract IOracle"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"positions","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"collateral","type":"uint256","internalType":"uint256"},{"name":"circuit","type":"address","internalType":"contract ITLOSCircuit"},{"name":"userCode","type":"bytes32","internalType":"bytes32"},{"name":"active","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"setStopLossCircuit","inputs":[{"name":"_circuit","type":"address","internalType":"address"},{"name":"_userCode","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"totalDeposits","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"triggerStopLoss","inputs":[{"name":"user","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"withdraw","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"wouldTrigger","inputs":[{"name":"user","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"Deposit","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"StopLossCancelled","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"StopLossSet","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"circuit","type":"address","indexed":false,"internalType":"address"},{"name":"userCode","type":"bytes32","indexed":false,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"StopLossTriggered","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"triggeredBy","type":"address","indexed":true,"internalType":"address"},{"name":"oraclePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"collateralReturned","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Withdraw","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false}],"bytecode":{"object":"0x60c0346100cf57601f610ce138819003918201601f19168301916001600160401b038311848410176100d4578084926020946040528339810103126100cf57516001600160a01b038116908190036100cf5760016000558015610099576080523360a052604051610bf690816100eb82396080518181816102b6015281816104c70152818161053a01526109d0015260a0518161020e0152f35b60405162461bcd60e51b815260206004820152600e60248201526d496e76616c6964206f7261636c6560901b6044820152606490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe6080806040526004361015610025575b50361561001b57600080fd5b610023610afb565b005b60003560e01c90816316c19739146107eb575080632e1a7d4d146106bc5780633ae578551461068f57806355f57510146106265780635a88057f146105b0578063796da7af146105145780637d882097146104f65780637dc0d1d0146104b1578063864a6a181461023d5780638da5cb5b146101f8578063d0e30db0146101ca5763dcd59543146100b6573861000f565b346101c55760403660031901126101c5576100cf610850565b6001600160a01b0316602435811561018e5733600052600160205260406000208054156101595780600160039201846bffffffffffffffffffffffff60a01b82541617905582600282015501600160ff1982541617905560405191825260208201527f9f0cf67f67181e01512363bcb76a67a8c0ffcbe72cc5dfdd943adf884067face60403392a2005b60405162461bcd60e51b815260206004820152600d60248201526c11195c1bdcda5d08199a5c9cdd609a1b6044820152606490fd5b60405162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a590818da5c98dd5a5d608a1b6044820152606490fd5b600080fd5b60003660031901126101c5576101e4600160005414610866565b60026000556101f1610afb565b6001600055005b346101c55760003660031901126101c5576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346101c55760203660031901126101c557610256610850565b610264600160005414610866565b600260009081556001600160a01b0382168082526001602052604090912060038101805493909161029760ff8616610ab9565b805492831561047c57604051634c6afee560e11b8152956020876004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa96871561043957600097610445575b506002830191610300835489610b8d565b916001850192602060018060a01b0385541691602460405180948193631ccf03c960e11b835260048301525afa9081156104395760009161040a575b50156103c55760009485905560ff1916905580546001600160a01b031916905581905560025461038d9282918291829187919061037a90839061089f565b6002555af16103876108fa565b5061093a565b60405192835260208301527f34e315238bef5f842642f408af6226f7cf091f250541ca4f5c0e5092bfe623fc60403393a36001600055005b60405162461bcd60e51b815260206004820152601b60248201527f53746f702d6c6f737320636f6e646974696f6e206e6f74206d657400000000006044820152606490fd5b61042c915060203d602011610432575b61042481836108c2565b810190610978565b8a61033c565b503d61041a565b6040513d6000823e3d90fd5b90966020823d602011610474575b81610460602093836108c2565b8101031261047157505195876102ef565b80fd5b3d9150610453565b60405162461bcd60e51b815260206004820152600d60248201526c139bc818dbdb1b185d195c985b609a1b6044820152606490fd5b346101c55760003660031901126101c5576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346101c55760003660031901126101c5576020600254604051908152f35b346101c55760003660031901126101c557604051634c6afee560e11b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa80156104395760009061057d575b602090604051908152f35b506020813d6020116105a8575b81610597602093836108c2565b810103126101c55760209051610572565b3d915061058a565b346101c55760003660031901126101c55733600052600160205260006002604082206003810180546105e460ff8216610ab9565b60ff191690556001810180546001600160a01b03191690550155337ffa28f6ebde758a203cedcb67695dbc8e3a3d510db321b2fbd03e5c84fbc093bf600080a2005b346101c55760203660031901126101c5576001600160a01b03610647610850565b1660005260016020526080604060002080549060018060a01b036001820154169060ff6003600283015492015416916040519384526020840152604083015215156060820152f35b346101c55760203660031901126101c55760206106b26106ad610850565b610990565b6040519015158152f35b346101c55760203660031901126101c5576004356106de600160005414610866565b6002600055336000526001602052604060002080548281106107a65760ff60038301541661076857826107109161089f565b905561071e8160025461089f565b600255610735600080808085335af16103876108fa565b6040519081527f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a942436460203392a26001600055005b60405162461bcd60e51b815260206004820152601660248201527510d85b98d95b081cdd1bdc0b5b1bdcdcc8199a5c9cdd60521b6044820152606490fd5b60405162461bcd60e51b815260206004820152601760248201527f496e73756666696369656e7420636f6c6c61746572616c0000000000000000006044820152606490fd5b346101c55760203660031901126101c5576080906001600160a01b0361080f610850565b166000526001602052604060002080549060018060a01b0360018201541660ff60036002840154930154169284526020840152604083015215156060820152f35b600435906001600160a01b03821682036101c557565b1561086d57565b60405162461bcd60e51b815260206004820152600a6024820152695265656e7472616e637960b01b6044820152606490fd5b919082039182116108ac57565b634e487b7160e01b600052601160045260246000fd5b90601f8019910116810190811067ffffffffffffffff8211176108e457604052565b634e487b7160e01b600052604160045260246000fd5b3d15610935573d9067ffffffffffffffff82116108e45760405191610929601f8201601f1916602001846108c2565b82523d6000602084013e565b606090565b1561094157565b60405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b6044820152606490fd5b908160209103126101c5575180151581036101c55790565b6001600160a01b03166000908152600160205260409020600381015460ff16158015610ab0575b610aaa57604051634c6afee560e11b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa90811561043957600091610a76575b50610a1b602091600284015490610b8d565b600190920154604051631ccf03c960e11b81526004810193909352829060249082906001600160a01b03165afa90811561043957600091610a5a575090565b610a73915060203d6020116104325761042481836108c2565b90565b90506020813d602011610aa2575b81610a91602093836108c2565b810103126101c55751610a1b610a09565b3d9150610a84565b50600090565b508054156109b7565b15610ac057565b60405162461bcd60e51b81526020600482015260136024820152724e6f206163746976652073746f702d6c6f737360681b6044820152606490fd5b3415610b59573360005260016020526040600020610b1a348254610bb3565b9055610b2834600254610bb3565b6002556040513481527fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c60203392a2565b60405162461bcd60e51b815260206004820152600c60248201526b16995c9bc819195c1bdcda5d60a21b6044820152606490fd5b906040519060208201928352604082015260408152610bad6060826108c2565b51902090565b919082018092116108ac5756fea264697066735822122046700bdc92f7c005fb149c28c74965c21e4a0b1855c5e186cea9cb9ed430eb5d64736f6c634300081f0033","sourceMap":"6130:8652:2:-:0;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;-1:-1:-1;;;;;6130:8652:2;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;6130:8652:2;;;;;;;;6663:1;-1:-1:-1;6130:8652:2;8060:21;;6130:8652;;8110:25;;8153:10;8145:18;;6130:8652;;;;;;;;8110:25;6130:8652;;;;;;;;;;;;;;;;;;;;8145:18;6130:8652;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;-1:-1:-1;6130:8652:2;;;;;;-1:-1:-1;6130:8652:2;;;;;-1:-1:-1;6130:8652:2","linkReferences":{}},"deployedBytecode":{"object":"0x6080806040526004361015610025575b50361561001b57600080fd5b610023610afb565b005b60003560e01c90816316c19739146107eb575080632e1a7d4d146106bc5780633ae578551461068f57806355f57510146106265780635a88057f146105b0578063796da7af146105145780637d882097146104f65780637dc0d1d0146104b1578063864a6a181461023d5780638da5cb5b146101f8578063d0e30db0146101ca5763dcd59543146100b6573861000f565b346101c55760403660031901126101c5576100cf610850565b6001600160a01b0316602435811561018e5733600052600160205260406000208054156101595780600160039201846bffffffffffffffffffffffff60a01b82541617905582600282015501600160ff1982541617905560405191825260208201527f9f0cf67f67181e01512363bcb76a67a8c0ffcbe72cc5dfdd943adf884067face60403392a2005b60405162461bcd60e51b815260206004820152600d60248201526c11195c1bdcda5d08199a5c9cdd609a1b6044820152606490fd5b60405162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a590818da5c98dd5a5d608a1b6044820152606490fd5b600080fd5b60003660031901126101c5576101e4600160005414610866565b60026000556101f1610afb565b6001600055005b346101c55760003660031901126101c5576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346101c55760203660031901126101c557610256610850565b610264600160005414610866565b600260009081556001600160a01b0382168082526001602052604090912060038101805493909161029760ff8616610ab9565b805492831561047c57604051634c6afee560e11b8152956020876004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa96871561043957600097610445575b506002830191610300835489610b8d565b916001850192602060018060a01b0385541691602460405180948193631ccf03c960e11b835260048301525afa9081156104395760009161040a575b50156103c55760009485905560ff1916905580546001600160a01b031916905581905560025461038d9282918291829187919061037a90839061089f565b6002555af16103876108fa565b5061093a565b60405192835260208301527f34e315238bef5f842642f408af6226f7cf091f250541ca4f5c0e5092bfe623fc60403393a36001600055005b60405162461bcd60e51b815260206004820152601b60248201527f53746f702d6c6f737320636f6e646974696f6e206e6f74206d657400000000006044820152606490fd5b61042c915060203d602011610432575b61042481836108c2565b810190610978565b8a61033c565b503d61041a565b6040513d6000823e3d90fd5b90966020823d602011610474575b81610460602093836108c2565b8101031261047157505195876102ef565b80fd5b3d9150610453565b60405162461bcd60e51b815260206004820152600d60248201526c139bc818dbdb1b185d195c985b609a1b6044820152606490fd5b346101c55760003660031901126101c5576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346101c55760003660031901126101c5576020600254604051908152f35b346101c55760003660031901126101c557604051634c6afee560e11b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa80156104395760009061057d575b602090604051908152f35b506020813d6020116105a8575b81610597602093836108c2565b810103126101c55760209051610572565b3d915061058a565b346101c55760003660031901126101c55733600052600160205260006002604082206003810180546105e460ff8216610ab9565b60ff191690556001810180546001600160a01b03191690550155337ffa28f6ebde758a203cedcb67695dbc8e3a3d510db321b2fbd03e5c84fbc093bf600080a2005b346101c55760203660031901126101c5576001600160a01b03610647610850565b1660005260016020526080604060002080549060018060a01b036001820154169060ff6003600283015492015416916040519384526020840152604083015215156060820152f35b346101c55760203660031901126101c55760206106b26106ad610850565b610990565b6040519015158152f35b346101c55760203660031901126101c5576004356106de600160005414610866565b6002600055336000526001602052604060002080548281106107a65760ff60038301541661076857826107109161089f565b905561071e8160025461089f565b600255610735600080808085335af16103876108fa565b6040519081527f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a942436460203392a26001600055005b60405162461bcd60e51b815260206004820152601660248201527510d85b98d95b081cdd1bdc0b5b1bdcdcc8199a5c9cdd60521b6044820152606490fd5b60405162461bcd60e51b815260206004820152601760248201527f496e73756666696369656e7420636f6c6c61746572616c0000000000000000006044820152606490fd5b346101c55760203660031901126101c5576080906001600160a01b0361080f610850565b166000526001602052604060002080549060018060a01b0360018201541660ff60036002840154930154169284526020840152604083015215156060820152f35b600435906001600160a01b03821682036101c557565b1561086d57565b60405162461bcd60e51b815260206004820152600a6024820152695265656e7472616e637960b01b6044820152606490fd5b919082039182116108ac57565b634e487b7160e01b600052601160045260246000fd5b90601f8019910116810190811067ffffffffffffffff8211176108e457604052565b634e487b7160e01b600052604160045260246000fd5b3d15610935573d9067ffffffffffffffff82116108e45760405191610929601f8201601f1916602001846108c2565b82523d6000602084013e565b606090565b1561094157565b60405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b6044820152606490fd5b908160209103126101c5575180151581036101c55790565b6001600160a01b03166000908152600160205260409020600381015460ff16158015610ab0575b610aaa57604051634c6afee560e11b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa90811561043957600091610a76575b50610a1b602091600284015490610b8d565b600190920154604051631ccf03c960e11b81526004810193909352829060249082906001600160a01b03165afa90811561043957600091610a5a575090565b610a73915060203d6020116104325761042481836108c2565b90565b90506020813d602011610aa2575b81610a91602093836108c2565b810103126101c55751610a1b610a09565b3d9150610a84565b50600090565b508054156109b7565b15610ac057565b60405162461bcd60e51b81526020600482015260136024820152724e6f206163746976652073746f702d6c6f737360681b6044820152606490fd5b3415610b59573360005260016020526040600020610b1a348254610bb3565b9055610b2834600254610bb3565b6002556040513481527fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c60203392a2565b60405162461bcd60e51b815260206004820152600c60248201526b16995c9bc819195c1bdcda5d60a21b6044820152606490fd5b906040519060208201928352604082015260408152610bad6060826108c2565b51902090565b919082018092116108ac5756fea264697066735822122046700bdc92f7c005fb149c28c74965c21e4a0b1855c5e186cea9cb9ed430eb5d64736f6c634300081f0033","sourceMap":"6130:8652:2:-:0;;;;;;;;;;-1:-1:-1;6130:8652:2;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;13946:17;6130:8652;13946:17;;;6130:8652;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;:::i;:::-;-1:-1:-1;;;;;6130:8652:2;;;10156:22;;6130:8652;;10249:10;6130:8652;;;;;;;;;;10278:18;6130:8652;;10333:11;6130:8652;10413:10;10333:11;;6130:8652;;;;;;;;;;10379:12;;;;6130:8652;10413:10;6130:8652;;;;;;;;;;;;;;;;;;10454:44;6130:8652;10249:10;10454:44;;6130:8652;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;7142:44;7170:1;6130:8652;;7150:21;7142:44;:::i;:::-;7215:1;6130:8652;;7226:1;;:::i;:::-;7170;6130:8652;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;6401:30;-1:-1:-1;;;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;:::i;:::-;7142:44;7170:1;6130:8652;;7150:21;7142:44;:::i;:::-;7215:1;6130:8652;;;;-1:-1:-1;;;;;6130:8652:2;;;;;;;;;;;;11840:10;;;6130:8652;;;11840:10;;11832:42;6130:8652;;;11832:42;:::i;:::-;6130:8652;;11892:18;;;6130:8652;;;;-1:-1:-1;;;11963:17:2;;6130:8652;;;;;11963:6;-1:-1:-1;;;;;6130:8652:2;11963:17;;;;;;;6130:8652;11963:17;;;6130:8652;12040:12;7215:1;12040:12;;6130:8652;12013:40;6130:8652;;12013:40;;:::i;:::-;12093:11;7170:1;12093:11;;6130:8652;;;;;;;;;;;12093:31;6130:8652;;;;;;;;;12093:31;;6130:8652;12093:31;;6130:8652;12093:31;;;;;;;6130:8652;12093:31;;;6130:8652;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;-1:-1:-1;;;;;;6130:8652:2;;;;;;7215:1;6130:8652;12530:35;;6130:8652;;;;;;;;;12407:35;;6130:8652;;12407:35;:::i;:::-;7215:1;6130:8652;12480:40;;;;:::i;:::-;;12530:35;:::i;:::-;6130:8652;;;;;;;;;12589:62;6130:8652;12613:10;12589:62;;7170:1;6130:8652;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;12093:31;6130:8652;;;;;;;;;;;12093:31;;;;6130:8652;12093:31;6130:8652;12093:31;;;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;;;;;;6130:8652;;;;;;;;;11963:17;;;6130:8652;11963:17;;6130:8652;11963:17;;;;;;6130:8652;11963:17;;;:::i;:::-;;;6130:8652;;;;;;11963:17;;;;6130:8652;;;11963:17;;;-1:-1:-1;11963:17:2;;6130:8652;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;6364:31;-1:-1:-1;;;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;6885:28;6130:8652;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;-1:-1:-1;;;13946:17:2;;;6130:8652;;;13946:6;-1:-1:-1;;;;;6130:8652:2;13946:17;;;;;;6130:8652;13946:17;;;6130:8652;13946:17;6130:8652;;;;;;;13946:17;;;;;;;;;;;;6130:8652;13946:17;;;:::i;:::-;;;6130:8652;;;;13946:17;6130:8652;;13946:17;;;;;-1:-1:-1;13946:17:2;;6130:8652;;;;;;-1:-1:-1;;6130:8652:2;;;;10709:10;6130:8652;;10699:9;6130:8652;;;10867:12;6130:8652;;;10738:10;;;6130:8652;;10730:42;6130:8652;;;10730:42;:::i;:::-;-1:-1:-1;;6130:8652:2;;;10699:9;10819:11;;6130:8652;;-1:-1:-1;;;;;;6130:8652:2;;;10867:12;6130:8652;10709:10;10916:29;-1:-1:-1;;10916:29:2;6130:8652;;;;;;;-1:-1:-1;;6130:8652:2;;;;-1:-1:-1;;;;;6130:8652:2;;:::i;:::-;;;;6821:53;6130:8652;;;;;;;;;;;;;;6821:53;;;6130:8652;;6821:53;6130:8652;6821:53;;;;6130:8652;6821:53;;6130:8652;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;;;:::i;:::-;;:::i;:::-;;;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;7142:44;6130:8652;;;7150:21;7142:44;:::i;:::-;7215:1;6130:8652;;8817:10;6130:8652;;;;;;;;;;8846:24;;;6130:8652;;;8917:10;;;6130:8652;;;;8973:24;;;;:::i;:::-;6130:8652;;9007:23;6130:8652;7215:1;6130:8652;9007:23;:::i;:::-;7215:1;6130:8652;9112:35;6130:8652;8817:10;;;;;9068:34;;;;:::i;9112:35::-;6130:8652;;;;;9162:28;6130:8652;8817:10;9162:28;;6130:8652;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;;-1:-1:-1;;;;;6130:8652:2;;:::i;:::-;;;;13700:9;6130:8652;;;;;;;;;;;;;13700:9;13782:11;;6130:8652;;;13834:10;13808:12;;;6130:8652;13834:10;;6130:8652;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;6130:8652:2;;;;;;:::o;:::-;;;;:::o;:::-;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;-1:-1:-1;6130:8652:2;;;;;-1:-1:-1;6130:8652:2;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;6130:8652:2;;;;;:::i;:::-;;;;-1:-1:-1;6130:8652:2;;;;:::o;:::-;;;:::o;:::-;;;;:::o;:::-;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;;;;;;;;;;;;;;:::o;13122:363::-;-1:-1:-1;;;;;6130:8652:2;;;;;;;;;;;13258:10;;;6130:8652;;;13257:11;6130:8652;;13257:34;;13122:363;13253:52;;6130:8652;;-1:-1:-1;;;13340:17:2;;6130:8652;;13340:17;6130:8652;13340:6;-1:-1:-1;;;;;6130:8652:2;13340:17;;;;;;;6130:8652;13340:17;;;13122:363;13417:12;13390:40;6130:8652;13417:12;;;;6130:8652;13390:40;;:::i;:::-;13228:9;13447:11;;;6130:8652;;;-1:-1:-1;;;13447:31:2;;13340:17;13447:31;;6130:8652;;;;;;13447:31;;6130:8652;;-1:-1:-1;;;;;6130:8652:2;13447:31;;;;;;;6130:8652;13447:31;;;13440:38;13122:363;:::o;13447:31::-;;;;6130:8652;13447:31;6130:8652;13447:31;;;;;;;:::i;:::-;13122:363;:::o;13340:17::-;;;6130:8652;13340:17;;6130:8652;13340:17;;;;;;6130:8652;13340:17;;;:::i;:::-;;;6130:8652;;;;;13390:40;13340:17;;;;;-1:-1:-1;13340:17:2;;13253:52;13293:12;6130:8652;13293:12;:::o;13257:34::-;6130:8652;;;13272:19;13257:34;;6130:8652;;;;:::o;:::-;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;8369:97;8449:9;8551:10;6130:8652;;8437:10;8560:1;6130:8652;8588:9;6130:8652;;;8560:1;6130:8652;8588:36;8449:9;6130:8652;;8588:36;:::i;:::-;6130:8652;;8634:23;8449:9;8634:23;6130:8652;8634:23;:::i;:::-;;6130:8652;;;8449:9;6130:8652;;8672:21;6130:8652;8437:10;8672:21;;8369:97::o;6130:8652::-;;;-1:-1:-1;;;6130:8652:2;;;;;;;;;;;;-1:-1:-1;;;6130:8652:2;;;;;;;14355:162;;6130:8652;;14476:33;;;;6130:8652;;;;;;;;14476:33;;;;;;:::i;:::-;6130:8652;14466:44;;14355:162;:::o;6130:8652::-;;;;;;;;;;:::o","linkReferences":{},"immutableReferences":{"2829":[{"start":694,"length":32},{"start":1223,"length":32},{"start":1338,"length":32},{"start":2512,"length":32}],"2831":[{"start":526,"length":32}]}},"methodIdentifiers":{"cancelStopLoss()":"5a88057f","deposit()":"d0e30db0","getOraclePrice()":"796da7af","getPosition(address)":"16c19739","oracle()":"7dc0d1d0","owner()":"8da5cb5b","positions(address)":"55f57510","setStopLossCircuit(address,bytes32)":"dcd59543","totalDeposits()":"7d882097","triggerStopLoss(address)":"864a6a18","withdraw(uint256)":"2e1a7d4d","wouldTrigger(address)":"3ae57855"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.31+commit.fd3a2265\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_oracle\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Deposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"StopLossCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"circuit\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"userCode\",\"type\":\"bytes32\"}],\"name\":\"StopLossSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"triggeredBy\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oraclePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"collateralReturned\",\"type\":\"uint256\"}],\"name\":\"StopLossTriggered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Withdraw\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"cancelStopLoss\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getOraclePrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"getPosition\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"circuit\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"userCode\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"oracle\",\"outputs\":[{\"internalType\":\"contract IOracle\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"positions\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"internalType\":\"contract ITLOSCircuit\",\"name\":\"circuit\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"userCode\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_circuit\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_userCode\",\"type\":\"bytes32\"}],\"name\":\"setStopLossCircuit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalDeposits\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"triggerStopLoss\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"wouldTrigger\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"cancelStopLoss()\":{\"details\":\"Allows user to withdraw collateral after cancelling\"},\"setStopLossCircuit(address,bytes32)\":{\"details\":\"The circuit encodes the stop-loss trigger price using TLOS obfuscation.      The userCode is a secret that, combined with the oracle price,      determines if the stop-loss should trigger.      To create the circuit off-chain:      1. Define your trigger condition: \\\"trigger if price < $X\\\"      2. Compile to a TLOS circuit using the compiler      3. Deploy the circuit and set it here with your userCode\",\"params\":{\"_circuit\":\"Address of the deployed TLOS circuit\",\"_userCode\":\"Secret code that parameterizes the circuit\"}},\"triggerStopLoss(address)\":{\"details\":\"ANYONE can call this - they cannot know if it will succeed.      The TLOS circuit hides the exact trigger price.      MEV searchers cannot predict when positions become triggerable.      The circuit evaluates: check(keccak256(price, userCode))      - If true: stop-loss triggers, collateral returned to user      - If false: transaction reverts, no state change\",\"params\":{\"user\":\"The address of the position to trigger\"}},\"wouldTrigger(address)\":{\"details\":\"WARNING: This reveals the circuit output! In production,      users should only call this via eth_call (off-chain).      MEV bots monitoring this on-chain could front-run.\"}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"cancelStopLoss()\":{\"notice\":\"Cancel an active stop-loss\"},\"setStopLossCircuit(address,bytes32)\":{\"notice\":\"Set up a hidden stop-loss condition\"},\"triggerStopLoss(address)\":{\"notice\":\"Trigger a user's stop-loss if conditions are met\"},\"wouldTrigger(address)\":{\"notice\":\"Check if a stop-loss would trigger at current price\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"examples/TLOSStopLoss.sol\":\"TLOSStopLoss\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":ds-test/=lib/solmate/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":solmate/=lib/solmate/src/\"],\"viaIR\":true},\"sources\":{\"examples/TLOSStopLoss.sol\":{\"keccak256\":\"0x71cc0d72033b22d065b815e4db2214fabee89906469327524cf4ca12d17763d4\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7c8a7552ca3e2493131f0e289c2932a364575d94bea91b66f847e1abfa48bfe6\",\"dweb:/ipfs/QmZRA6y1QTFMdhYkVPP4PCAbU8dGc7iTQ4CM7FDraN13Bb\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.31+commit.fd3a2265"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_oracle","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"Deposit","anonymous":false},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true}],"type":"event","name":"StopLossCancelled","anonymous":false},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true},{"internalType":"address","name":"circuit","type":"address","indexed":false},{"internalType":"bytes32","name":"userCode","type":"bytes32","indexed":false}],"type":"event","name":"StopLossSet","anonymous":false},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true},{"internalType":"address","name":"triggeredBy","type":"address","indexed":true},{"internalType":"uint256","name":"oraclePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"collateralReturned","type":"uint256","indexed":false}],"type":"event","name":"StopLossTriggered","anonymous":false},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"Withdraw","anonymous":false},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"cancelStopLoss"},{"inputs":[],"stateMutability":"payable","type":"function","name":"deposit"},{"inputs":[],"stateMutability":"view","type":"function","name":"getOraclePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"stateMutability":"view","type":"function","name":"getPosition","outputs":[{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"address","name":"circuit","type":"address"},{"internalType":"bytes32","name":"userCode","type":"bytes32"},{"internalType":"bool","name":"active","type":"bool"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"oracle","outputs":[{"internalType":"contract IOracle","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"positions","outputs":[{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"contract ITLOSCircuit","name":"circuit","type":"address"},{"internalType":"bytes32","name":"userCode","type":"bytes32"},{"internalType":"bool","name":"active","type":"bool"}]},{"inputs":[{"internalType":"address","name":"_circuit","type":"address"},{"internalType":"bytes32","name":"_userCode","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"setStopLossCircuit"},{"inputs":[],"stateMutability":"view","type":"function","name":"totalDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"triggerStopLoss"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"withdraw"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"stateMutability":"view","type":"function","name":"wouldTrigger","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[],"stateMutability":"payable","type":"receive"}],"devdoc":{"kind":"dev","methods":{"cancelStopLoss()":{"details":"Allows user to withdraw collateral after cancelling"},"setStopLossCircuit(address,bytes32)":{"details":"The circuit encodes the stop-loss trigger price using TLOS obfuscation.      The userCode is a secret that, combined with the oracle price,      determines if the stop-loss should trigger.      To create the circuit off-chain:      1. Define your trigger condition: \"trigger if price < $X\"      2. Compile to a TLOS circuit using the compiler      3. Deploy the circuit and set it here with your userCode","params":{"_circuit":"Address of the deployed TLOS circuit","_userCode":"Secret code that parameterizes the circuit"}},"triggerStopLoss(address)":{"details":"ANYONE can call this - they cannot know if it will succeed.      The TLOS circuit hides the exact trigger price.      MEV searchers cannot predict when positions become triggerable.      The circuit evaluates: check(keccak256(price, userCode))      - If true: stop-loss triggers, collateral returned to user      - If false: transaction reverts, no state change","params":{"user":"The address of the position to trigger"}},"wouldTrigger(address)":{"details":"WARNING: This reveals the circuit output! In production,      users should only call this via eth_call (off-chain).      MEV bots monitoring this on-chain could front-run."}},"version":1},"userdoc":{"kind":"user","methods":{"cancelStopLoss()":{"notice":"Cancel an active stop-loss"},"setStopLossCircuit(address,bytes32)":{"notice":"Set up a hidden stop-loss condition"},"triggerStopLoss(address)":{"notice":"Trigger a user's stop-loss if conditions are met"},"wouldTrigger(address)":{"notice":"Check if a stop-loss would trigger at current price"}},"version":1}},"settings":{"remappings":["ds-test/=lib/solmate/lib/ds-test/src/","forge-std/=lib/forge-std/src/","solmate/=lib/solmate/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"examples/TLOSStopLoss.sol":"TLOSStopLoss"},"evmVersion":"paris","libraries":{},"viaIR":true},"sources":{"examples/TLOSStopLoss.sol":{"keccak256":"0x71cc0d72033b22d065b815e4db2214fabee89906469327524cf4ca12d17763d4","urls":["bzz-raw://7c8a7552ca3e2493131f0e289c2932a364575d94bea91b66f847e1abfa48bfe6","dweb:/ipfs/QmZRA6y1QTFMdhYkVPP4PCAbU8dGc7iTQ4CM7FDraN13Bb"],"license":"MIT"}},"version":1},"id":2}