{"abi":[{"type":"function","name":"getPrice","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"getPrice()":"98d5fdca"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.31+commit.fd3a2265\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"getPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"TLOS Project\",\"details\":\"CRITICAL: This contract is for DEMONSTRATION ONLY! Known issues that make this unsafe for production:   1. No real token integration (simplified ETH-only collateral)   2. No access control on oracle/circuit addresses   3. No price feed validation or staleness checks   4. No slippage protection on stop-loss execution   5. Simplified trigger logic - production needs more conditions   6. No keeper incentives or gas cost reimbursement This example ONLY demonstrates the TLOS integration pattern for MEV-resistant stop-loss threshold hiding. For production DeFi, integrate with real DEXs. For production TLOS usage, see: contracts/TLOSWithPuzzleV4.sol\",\"kind\":\"dev\",\"methods\":{},\"title\":\"TLOSStopLoss - Hidden Stop-Loss Vault with MEV Protection\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"############################################################################## #                                                                            # #   \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557  \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557     \\u2588\\u2588\\u2588\\u2557   \\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557    \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557   # #   \\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2588\\u2588\\u2557    \\u2588\\u2588\\u2588\\u2588\\u2557  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2588\\u2588\\u2557\\u255a\\u2550\\u2550\\u2588\\u2588\\u2554\\u2550\\u2550\\u255d    \\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2550\\u255d   # #   \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551    \\u2588\\u2588\\u2554\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2551\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551       \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557     # #   \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551    \\u2588\\u2588\\u2551\\u255a\\u2588\\u2588\\u2557\\u2588\\u2588\\u2551\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551       \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2554\\u2550\\u2550\\u255d     # #   \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d\\u255a\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d    \\u2588\\u2588\\u2551 \\u255a\\u2588\\u2588\\u2588\\u2588\\u2551\\u255a\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d   \\u2588\\u2588\\u2551       \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557   # #   \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d  \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d     \\u255a\\u2550\\u255d  \\u255a\\u2550\\u2550\\u2550\\u255d \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d    \\u255a\\u2550\\u255d       \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d   # #                                                                            # #   \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2557      \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2557   \\u2588\\u2588\\u2557\\u2588\\u2588\\u2557                   # #   \\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2550\\u255d\\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2551     \\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2588\\u2588\\u2557\\u255a\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2551                   # #   \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557  \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2551     \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551 \\u255a\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d \\u2588\\u2588\\u2551                   # #   \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2554\\u2550\\u2550\\u255d  \\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u255d \\u2588\\u2588\\u2551     \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551  \\u255a\\u2588\\u2588\\u2554\\u255d  \\u255a\\u2550\\u255d                   # #   \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\u2588\\u2588\\u2551     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\u255a\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2557                   # #   \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d\\u255a\\u2550\\u255d     \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d    \\u255a\\u2550\\u255d   \\u255a\\u2550\\u255d                   # #                                                                            # ##############################################################################Demonstrates hidden stop-loss triggers using TLOS obfuscation ## How This Prevents MEV Front-Running (Paper Section 4.1.1) Traditional stop-loss implementations expose trigger prices:   - Stop-loss price stored on-chain or derivable from position data   - MEV bots monitor price feeds and pending transactions   - When price approaches threshold, bots front-run to extract value   - Users get worse execution or their stop-loss fails entirely TLOS-protected stop-loss hides the trigger inside an obfuscated circuit:   - The stop-loss condition is encrypted using LWE-based obfuscation   - Attackers cannot determine WHEN a stop-loss will trigger   - The circuit takes (oracle_price, user_code) and outputs true/false   - Even with full contract access, the threshold remains hidden ## Flow Diagram (ASCII)   User                              Contract                         Oracle     |                                  |                               |     |  1. deposit(ETH)                 |                               |     |--------------------------------->|                               |     |                                  |                               |     |  2. setStopLossCircuit(addr,code)|                               |     |--------------------------------->| stores circuit + userCode     |     |                                  |                               |     |  [price moves]                   |                               |     |                                  |                               |     |              Anyone: triggerStopLoss(user)                       |     |                                  |-------- getPrice() ---------->|     |                                  |<-------- price ---------------|     |                                  |                               |     |                                  | circuit.check(price, userCode)|     |                                  | if true -> return collateral  |     |<---------------------------------|                               |     |  ETH returned                    |                               | Security layers (from full TLOS):   1. Topology layer: Structural mixing defeats pattern analysis   2. LWE layer: Control function hiding (~2^112 post-quantum security)   3. Wire binding: Full-rank linear hash for inter-gate consistency   4. Planted LWE puzzle: Forces minimum 2^76 brute-force search\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"examples/TLOSStopLoss.sol\":\"IOracle\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":ds-test/=lib/solmate/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":solmate/=lib/solmate/src/\"],\"viaIR\":true},\"sources\":{\"examples/TLOSStopLoss.sol\":{\"keccak256\":\"0x71cc0d72033b22d065b815e4db2214fabee89906469327524cf4ca12d17763d4\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7c8a7552ca3e2493131f0e289c2932a364575d94bea91b66f847e1abfa48bfe6\",\"dweb:/ipfs/QmZRA6y1QTFMdhYkVPP4PCAbU8dGc7iTQ4CM7FDraN13Bb\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.31+commit.fd3a2265"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"view","type":"function","name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["ds-test/=lib/solmate/lib/ds-test/src/","forge-std/=lib/forge-std/src/","solmate/=lib/solmate/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"examples/TLOSStopLoss.sol":"IOracle"},"evmVersion":"paris","libraries":{},"viaIR":true},"sources":{"examples/TLOSStopLoss.sol":{"keccak256":"0x71cc0d72033b22d065b815e4db2214fabee89906469327524cf4ca12d17763d4","urls":["bzz-raw://7c8a7552ca3e2493131f0e289c2932a364575d94bea91b66f847e1abfa48bfe6","dweb:/ipfs/QmZRA6y1QTFMdhYkVPP4PCAbU8dGc7iTQ4CM7FDraN13Bb"],"license":"MIT"}},"version":1},"id":2}